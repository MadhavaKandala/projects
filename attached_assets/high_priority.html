<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>High Priority Tasks - Task Crown</title>
  <link rel="stylesheet" href="high_priority.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <nav class="navbar">
    <div class="navbar-left">
      <div class="logo">
        <span class="logo-icon">üëë</span>
        <span class="logo-text">Task Crown</span>
      </div>
    </div>
    <div class="navbar-center">
      <a href="personal.html" class="nav-link">Dashboard</a>
      <a href="pending_tasks.html" class="nav-link">Pending Tasks</a>
      <a href="high_priority.html" class="nav-link active">High Priority</a>
      <a href="completed_this_week.html" class="nav-link">Completed</a>
      <a href="productivity_score.html" class="nav-link">Productivity</a>
    </div>
    <div class="navbar-right">
      <button class="profile-btn">
        <span class="profile-avatar">üë§</span>
      </button>
      <button class="logout-btn" onclick="logout()">
        <span class="logout-icon">üö™</span>
        <span class="logout-text">Logout</span>
      </button>
    </div>
  </nav>

  <main class="main-content">
    <div class="page-header">
      <div class="header-icon">üö®</div>
      <div class="header-content">
        <h1>High Priority Tasks</h1>
        <p>Focus on what matters most. <span class="highlight">3 urgent tasks</span> need your attention.</p>
      </div>
    </div>

    <div class="tasks-grid">
      <div class="task-card urgent">
        <div class="task-header">
          <div class="priority-badge critical">Critical</div>
          <div class="task-due">Due Today</div>
        </div>
        <h3>Complete API Integration</h3>
        <p>Finish connecting the payment gateway API before the client demo.</p>
        <div class="task-meta">
          <span class="task-time">‚è∞ 2 hours remaining</span>
          <div class="task-progress">
            <div class="progress-bar">
              <div class="progress-fill" style="width: 75%"></div>
            </div>
            <span>75%</span>
          </div>
        </div>
      </div>

      <div class="task-card high">
        <div class="task-header">
          <div class="priority-badge high">High</div>
          <div class="task-due">Due Tomorrow</div>
        </div>
        <h3>Review Security Audit</h3>
        <p>Go through the security assessment report and address critical vulnerabilities.</p>
        <div class="task-meta">
          <span class="task-time">‚è∞ 1 day remaining</span>
          <div class="task-progress">
            <div class="progress-bar">
              <div class="progress-fill" style="width: 40%"></div>
            </div>
            <span>40%</span>
          </div>
        </div>
      </div>

      <div class="task-card high">
        <div class="task-header">
          <div class="priority-badge high">High</div>
          <div class="task-due">Due in 2 days</div>
        </div>
        <h3>Prepare Sprint Presentation</h3>
        <p>Create slides and demo materials for the upcoming sprint review meeting.</p>
        <div class="task-meta">
          <span class="task-time">‚è∞ 2 days remaining</span>
          <div class="task-progress">
            <div class="progress-bar">
              <div class="progress-fill" style="width: 10%"></div>
            </div>
            <span>10%</span>
          </div>
        </div>
      </div>
    </div>

    <div class="action-section">
      <h2>Quick Actions</h2>
      <div class="action-buttons">
        <button class="action-btn primary">
          <span class="btn-icon">‚ö°</span>
          Activate Stuck Mode‚Ñ¢
        </button>
        <button class="action-btn secondary">
          <span class="btn-icon">üÜò</span>
          Send SOS Alert
        </button>
        <button class="action-btn secondary">
          <span class="btn-icon">üìÖ</span>
          Schedule Focus Time
        </button>
      </div>
    </div>
  </main>

  <script>
    // Dynamic task management
    let tasks = [
      { id: 1, title: "Complete API Integration", progress: 75, timeRemaining: "2 hours" },
      { id: 2, title: "Review Security Audit", progress: 40, timeRemaining: "1 day" },
      { id: 3, title: "Prepare Sprint Presentation", progress: 10, timeRemaining: "2 days" }
    ];

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      setupTaskInteractions();
      
      // Update progress every 30 seconds
      setInterval(updateProgress, 30000);
    });

    function setupTaskInteractions() {
      // Add click handlers for progress bars
      document.querySelectorAll('.progress-bar').forEach((bar, index) => {
        bar.addEventListener('click', function() {
          updateTaskProgress(index + 1);
        });
      });

      // Add click handlers for action buttons
      document.querySelector('.action-btn.primary').addEventListener('click', activateStuckMode);
      document.querySelectorAll('.action-btn.secondary')[0].addEventListener('click', sendSOSAlert);
      document.querySelectorAll('.action-btn.secondary')[1].addEventListener('click', scheduleFocusTime);
    }

    function updateTaskProgress(taskId) {
      const task = tasks.find(t => t.id === taskId);
      if (task) {
        task.progress = Math.min(100, task.progress + 10);
        const progressBar = document.querySelectorAll('.progress-fill')[taskId - 1];
        const progressText = document.querySelectorAll('.task-progress span')[taskId - 1];
        
        if (progressBar) {
          progressBar.style.width = task.progress + '%';
        }
        if (progressText) {
          progressText.textContent = task.progress + '%';
        }
        
        if (task.progress === 100) {
          showNotification(`üéâ Task "${task.title}" completed!`);
        } else {
          showNotification(`üìà Progress updated for "${task.title}"`);
        }
      }
    }

    function updateProgress() {
      // Simulate real-time progress updates
      tasks.forEach((task, index) => {
        if (task.progress < 100 && Math.random() < 0.3) {
          task.progress = Math.min(100, task.progress + Math.floor(Math.random() * 5));
          const progressBar = document.querySelectorAll('.progress-fill')[index];
          const progressText = document.querySelectorAll('.task-progress span')[index];
          
          if (progressBar) {
            progressBar.style.width = task.progress + '%';
          }
          if (progressText) {
            progressText.textContent = task.progress + '%';
          }
        }
      });
    }

    function activateStuckMode() {
      showNotification('üß† Stuck Mode‚Ñ¢ activated! Breaking down tasks into smaller steps...');
      
      // Add visual feedback
      document.querySelectorAll('.task-card').forEach(card => {
        card.style.border = '2px solid #FF9800';
        setTimeout(() => {
          card.style.border = '';
        }, 3000);
      });
    }

    function sendSOSAlert() {
      showNotification('üÜò SOS Alert sent to team! Help is on the way.');
      
      // Simulate team response
      setTimeout(() => {
        showNotification('üë• Team member Sarah is available to help!');
      }, 2000);
    }

    function scheduleFocusTime() {
      const duration = prompt('How many hours of focus time do you need?', '2');
      if (duration) {
        showNotification(`üìÖ Focus time scheduled for ${duration} hours`);
        
        // Add to calendar (simulated)
        setTimeout(() => {
          showNotification('‚úÖ Focus time added to your calendar');
        }, 1000);
      }
    }

    function showNotification(message) {
      const notification = document.createElement('div');
      notification.textContent = message;
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #2196F3;
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        z-index: 1000;
        animation: slideIn 0.3s ease-out;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      `;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-in';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, 3000);
    }

    // Logout function
    function logout() {
      const confirmLogout = confirm('Are you sure you want to logout?');
      if (confirmLogout) {
        // Clear any stored user data
        localStorage.removeItem('userRole');
        localStorage.removeItem('userSettings');
        
        // Show logout message
        alert('Logging out...');
        
        // Redirect to home page after a short delay
        setTimeout(() => {
          window.location.href = '../home.html';
        }, 1000);
      }
    }
  </script>

  <style>
    /* Animation keyframes */
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes slideOut {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }

    /* Task card enhancements */
    .task-card {
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .task-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.2);
    }

    /* Progress bar enhancements */
    .progress-bar {
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .progress-bar:hover {
      transform: scaleY(1.2);
    }

    .progress-fill {
      transition: width 0.5s ease;
    }

    /* Action button enhancements */
    .action-btn {
      transition: all 0.3s ease;
    }

    .action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
  </style>
</body>
</html>