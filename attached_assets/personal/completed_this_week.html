<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Completed This Week - Task Crown</title>
  <link rel="stylesheet" href="completed_this_week.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <nav class="navbar">
    <div class="navbar-left">
      <div class="logo">
        <span class="logo-icon">👑</span>
        <span class="logo-text">Task Crown</span>
      </div>
    </div>
    <div class="navbar-center">
      <a href="personal.html" class="nav-link">Dashboard</a>
      <a href="pending_tasks.html" class="nav-link">Pending Tasks</a>
      <a href="high_priority.html" class="nav-link">High Priority</a>
      <a href="completed_this_week.html" class="nav-link active">Completed</a>
      <a href="productivity_score.html" class="nav-link">Productivity</a>
    </div>
    <div class="navbar-right">
      <button class="profile-btn">
        <span class="profile-avatar">👤</span>
      </button>
      <button class="logout-btn" onclick="logout()">
        <span class="logout-icon">🚪</span>
        <span class="logout-text">Logout</span>
      </button>
    </div>
  </nav>

  <main class="main-content">
    <div class="page-header">
      <div class="header-icon">🎉</div>
      <div class="header-content">
        <h1>Completed This Week</h1>
        <p>Great progress! You've completed <span class="highlight">12 tasks</span> this week.</p>
      </div>
    </div>

    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-icon">✅</div>
        <div class="stat-value">12</div>
        <div class="stat-label">Tasks Completed</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">⚡</div>
        <div class="stat-value">4.2</div>
        <div class="stat-label">Avg Tasks/Day</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">🏆</div>
        <div class="stat-value">95%</div>
        <div class="stat-label">Success Rate</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">⏱️</div>
        <div class="stat-value">28h</div>
        <div class="stat-label">Time Saved</div>
      </div>
    </div>

    <div class="timeline-section">
      <h2>📅 Weekly Timeline</h2>
      <div class="timeline">
        <div class="day-group">
          <div class="day-header">
            <h3>Today</h3>
            <span class="task-count">3 tasks</span>
          </div>
          <div class="completed-task">
            <div class="task-icon">✅</div>
            <div class="task-content">
              <h4>Fix responsive layout bugs</h4>
              <p>Resolved mobile display issues on the dashboard</p>
              <span class="task-time">Completed 2 hours ago</span>
            </div>
          </div>
          <div class="completed-task">
            <div class="task-icon">✅</div>
            <div class="task-content">
              <h4>Update user documentation</h4>
              <p>Added new feature guides and troubleshooting tips</p>
              <span class="task-time">Completed 4 hours ago</span>
            </div>
          </div>
          <div class="completed-task">
            <div class="task-icon">✅</div>
            <div class="task-content">
              <h4>Team standup meeting</h4>
              <p>Weekly sync with development team</p>
              <span class="task-time">Completed 6 hours ago</span>
            </div>
          </div>
        </div>

        <div class="day-group">
          <div class="day-header">
            <h3>Yesterday</h3>
            <span class="task-count">4 tasks</span>
          </div>
          <div class="completed-task">
            <div class="task-icon">✅</div>
            <div class="task-content">
              <h4>Deploy v2.1 to production</h4>
              <p>Successfully rolled out new features to all users</p>
              <span class="task-time">Completed yesterday</span>
            </div>
          </div>
          <div class="completed-task">
            <div class="task-icon">✅</div>
            <div class="task-content">
              <h4>Code review for PR #247</h4>
              <p>Reviewed and approved authentication improvements</p>
              <span class="task-time">Completed yesterday</span>
            </div>
          </div>
        </div>

        <div class="day-group">
          <div class="day-header">
            <h3>This Week</h3>
            <span class="task-count">5 more tasks</span>
          </div>
          <div class="completed-task">
            <div class="task-icon">✅</div>
            <div class="task-content">
              <h4>Database optimization</h4>
              <p>Improved query performance by 40%</p>
              <span class="task-time">Completed 3 days ago</span>
            </div>
          </div>
          <div class="completed-task">
            <div class="task-icon">✅</div>
            <div class="task-content">
              <h4>Customer feedback analysis</h4>
              <p>Analyzed 150+ user reviews and created action plan</p>
              <span class="task-time">Completed 4 days ago</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="achievement-section">
      <h2>🏆 Achievements Unlocked</h2>
      <div class="achievements-grid">
        <div class="achievement-card unlocked">
          <div class="achievement-icon">🔥</div>
          <h4>Streak Master</h4>
          <p>Completed tasks 7 days in a row</p>
        </div>
        <div class="achievement-card unlocked">
          <div class="achievement-icon">⚡</div>
          <h4>Speed Runner</h4>
          <p>Finished 5 tasks in one day</p>
        </div>
        <div class="achievement-card">
          <div class="achievement-icon">🎯</div>
          <h4>Perfect Week</h4>
          <p>Complete all planned tasks</p>
          <div class="achievement-progress">
            <div class="progress-bar">
              <div class="progress-fill" style="width: 85%"></div>
            </div>
            <span>85%</span>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Global state for dynamic functionality
    let completedState = {
      completedTasks: 12,
      avgTasksPerDay: 4.2,
      successRate: 95,
      timeSaved: 28,
      achievements: [
        { id: 1, name: "Streak Master", description: "Completed tasks 7 days in a row", unlocked: true, icon: "🔥" },
        { id: 2, name: "Speed Runner", description: "Finished 5 tasks in one day", unlocked: true, icon: "⚡" },
        { id: 3, name: "Perfect Week", description: "Complete all planned tasks", unlocked: false, progress: 85, icon: "🎯" }
      ],
      timeline: [
        {
          day: "Today",
          count: 3,
          tasks: [
            { title: "Fix responsive layout bugs", description: "Resolved mobile display issues on the dashboard", time: "2 hours ago" },
            { title: "Update user documentation", description: "Added new feature guides and troubleshooting tips", time: "4 hours ago" },
            { title: "Team standup meeting", description: "Weekly sync with development team", time: "6 hours ago" }
          ]
        },
        {
          day: "Yesterday",
          count: 4,
          tasks: [
            { title: "Deploy v2.1 to production", description: "Successfully rolled out new features to all users", time: "yesterday" },
            { title: "Code review for PR #247", description: "Reviewed and approved authentication improvements", time: "yesterday" }
          ]
        }
      ]
    };

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      updateStats();
      setupInteractions();
      
      // Update stats every minute
      setInterval(updateStats, 60000);
      
      // Add new completed tasks periodically
      setInterval(addRandomCompletedTask, 120000); // Every 2 minutes
    });

    function updateStats() {
      // Simulate real-time updates
      completedState.completedTasks += Math.floor(Math.random() * 2);
      completedState.avgTasksPerDay += (Math.random() - 0.5) * 0.1;
      completedState.successRate += (Math.random() - 0.5) * 1;
      completedState.timeSaved += Math.floor(Math.random() * 2);
      
      // Keep values in reasonable ranges
      completedState.avgTasksPerDay = Math.max(3, Math.min(6, completedState.avgTasksPerDay));
      completedState.successRate = Math.max(90, Math.min(100, completedState.successRate));
      
      // Update DOM
      updateStatDisplays();
      updateTimeline();
      checkAchievements();
    }

    function updateStatDisplays() {
      const statValues = document.querySelectorAll('.stat-value');
      if (statValues.length >= 4) {
        statValues[0].textContent = completedState.completedTasks;
        statValues[1].textContent = completedState.avgTasksPerDay.toFixed(1);
        statValues[2].textContent = Math.round(completedState.successRate) + '%';
        statValues[3].textContent = completedState.timeSaved + 'h';
      }
      
      // Update highlight text
      const highlightElement = document.querySelector('.highlight');
      if (highlightElement) {
        highlightElement.textContent = completedState.completedTasks + ' tasks';
      }
    }

    function updateTimeline() {
      // Update task counts
      const taskCounts = document.querySelectorAll('.task-count');
      completedState.timeline.forEach((day, index) => {
        if (taskCounts[index]) {
          taskCounts[index].textContent = day.count + ' tasks';
        }
      });
    }

    function addRandomCompletedTask() {
      const newTasks = [
        { title: "Code optimization", description: "Improved performance by 15%", time: "Just now" },
        { title: "Bug fix deployment", description: "Resolved critical user feedback", time: "Just now" },
        { title: "Documentation update", description: "Updated API documentation", time: "Just now" },
        { title: "Test case completion", description: "Added comprehensive test coverage", time: "Just now" }
      ];
      
      const randomTask = newTasks[Math.floor(Math.random() * newTasks.length)];
      
      // Add to today's timeline
      if (completedState.timeline[0]) {
        completedState.timeline[0].tasks.unshift(randomTask);
        completedState.timeline[0].count++;
        completedState.completedTasks++;
        
        showNotification(`✅ Completed: "${randomTask.title}"`);
        updateStatDisplays();
        updateTimeline();
      }
    }

    function checkAchievements() {
      // Check for new achievements
      if (completedState.completedTasks >= 15 && !completedState.achievements.find(a => a.name === "Task Master")) {
        completedState.achievements.push({
          id: 4,
          name: "Task Master",
          description: "Completed 15+ tasks this week",
          unlocked: true,
          icon: "👑"
        });
        showNotification('🏆 New Achievement Unlocked: Task Master!');
      }
      
      // Update achievement progress
      const perfectWeekAchievement = completedState.achievements.find(a => a.name === "Perfect Week");
      if (perfectWeekAchievement) {
        perfectWeekAchievement.progress = Math.min(100, perfectWeekAchievement.progress + Math.floor(Math.random() * 5));
        if (perfectWeekAchievement.progress >= 100) {
          perfectWeekAchievement.unlocked = true;
          showNotification('🎯 Achievement Unlocked: Perfect Week!');
        }
      }
      
      renderAchievements();
    }

    function renderAchievements() {
      const achievementsGrid = document.querySelector('.achievements-grid');
      if (!achievementsGrid) return;
      
      achievementsGrid.innerHTML = completedState.achievements.map(achievement => `
        <div class="achievement-card ${achievement.unlocked ? 'unlocked' : ''}">
          <div class="achievement-icon">${achievement.icon}</div>
          <h4>${achievement.name}</h4>
          <p>${achievement.description}</p>
          ${!achievement.unlocked && achievement.progress ? `
            <div class="achievement-progress">
              <div class="progress-bar">
                <div class="progress-fill" style="width: ${achievement.progress}%"></div>
              </div>
              <span>${achievement.progress}%</span>
            </div>
          ` : ''}
        </div>
      `).join('');
    }

    function setupInteractions() {
      // Add click handlers for completed tasks
      document.querySelectorAll('.completed-task').forEach(task => {
        task.addEventListener('click', function() {
          const taskTitle = this.querySelector('h4').textContent;
          showTaskDetails(taskTitle);
        });
      });

      // Add click handlers for achievement cards
      document.querySelectorAll('.achievement-card').forEach(card => {
        card.addEventListener('click', function() {
          const achievementName = this.querySelector('h4').textContent;
          showAchievementDetails(achievementName);
        });
      });
    }

    function showTaskDetails(taskTitle) {
      showNotification(`📋 Task Details: "${taskTitle}" - Great work on completing this task!`);
    }

    function showAchievementDetails(achievementName) {
      const achievement = completedState.achievements.find(a => a.name === achievementName);
      if (achievement) {
        const message = achievement.unlocked 
          ? `🏆 Achievement: ${achievement.name} - ${achievement.description}`
          : `🎯 Achievement Progress: ${achievement.name} - ${achievement.progress || 0}% complete`;
        showNotification(message);
      }
    }

    function showNotification(message) {
      const notification = document.createElement('div');
      notification.textContent = message;
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #4CAF50;
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        z-index: 1000;
        animation: slideIn 0.3s ease-out;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      `;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-in';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, 3000);
    }

    // Logout function
    function logout() {
      const confirmLogout = confirm('Are you sure you want to logout?');
      if (confirmLogout) {
        // Clear any stored user data
        localStorage.removeItem('userRole');
        localStorage.removeItem('userSettings');
        
        // Show logout message
        alert('Logging out...');
        
        // Redirect to home page after a short delay
        setTimeout(() => {
          window.location.href = '../home.html';
        }, 1000);
      }
    }
  </script>

  <style>
    /* Animation keyframes */
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes slideOut {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }

    /* Stat card enhancements */
    .stat-card {
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .stat-value {
      transition: all 0.3s ease;
    }

    /* Timeline enhancements */
    .completed-task {
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .completed-task:hover {
      transform: translateX(8px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .task-icon {
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-4px); }
    }

    /* Achievement card enhancements */
    .achievement-card {
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .achievement-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.2);
    }

    .achievement-card.unlocked {
      border: 2px solid #FFD700;
    }

    .achievement-icon {
      animation: glow 2s infinite;
    }

    @keyframes glow {
      0%, 100% { filter: brightness(1); }
      50% { filter: brightness(1.2); }
    }

    /* Progress bar enhancements */
    .progress-fill {
      transition: width 0.5s ease;
      background: linear-gradient(90deg, #4CAF50, #45a049);
    }

    /* Celebration animation for new achievements */
    .achievement-card.unlocked {
      animation: celebrate 0.6s ease-out;
    }

    @keyframes celebrate {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
  </style>
</body>
</html>