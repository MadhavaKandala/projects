
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pending Tasks - Task Crown</title>
  <link rel="stylesheet" href="pending_tasks.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <nav class="navbar">
    <div class="navbar-left">
      <div class="logo">
        <span class="logo-icon">üëë</span>
        <span class="logo-text">Task Crown</span>
      </div>
    </div>
    <div class="navbar-center">
      <a href="personal.html" class="nav-link">Dashboard</a>
      <a href="pending_tasks.html" class="nav-link active">Pending Tasks</a>
      <a href="high_priority.html" class="nav-link">High Priority</a>
      <a href="completed_this_week.html" class="nav-link">Completed</a>
      <a href="productivity_score.html" class="nav-link">Productivity</a>
    </div>
    <div class="navbar-right">
      <button class="profile-btn">
        <span class="profile-avatar">üë§</span>
      </button>
      <button class="logout-btn" onclick="logout()">
        <span class="logout-icon">üö™</span>
        <span class="logout-text">Logout</span>
      </button>
    </div>
  </nav>

  <main class="main-content">
    <div class="page-header">
      <div class="header-icon">‚è≥</div>
      <div class="header-content">
        <h1>Pending Tasks</h1>
        <p>You have <span class="highlight">8 pending tasks</span> that need attention.</p>
      </div>
    </div>

    <div class="filters-section">
      <div class="filter-tabs">
        <button class="filter-tab active">All Pending</button>
        <button class="filter-tab">Overdue</button>
        <button class="filter-tab">This Week</button>
        <button class="filter-tab">Next Week</button>
      </div>
      <div class="sort-controls">
        <select class="sort-select">
          <option>Sort by Due Date</option>
          <option>Sort by Priority</option>
          <option>Sort by Project</option>
        </select>
      </div>
    </div>

    <div class="tasks-container">
      <div class="task-card overdue">
        <div class="task-header">
          <div class="priority-badge high">High</div>
          <div class="task-due overdue">Overdue by 2 days</div>
        </div>
        <h3>Update security protocols</h3>
        <p>Review and implement new security measures for user authentication</p>
        <div class="task-meta">
          <span class="task-project">üîê Security Project</span>
          <span class="task-assignee">Assigned to: Madhava</span>
        </div>
        <div class="task-actions">
          <button class="action-btn start">Start Now</button>
          <button class="action-btn reschedule">Reschedule</button>
        </div>
      </div>

      <div class="task-card due-soon">
        <div class="task-header">
          <div class="priority-badge medium">Medium</div>
          <div class="task-due">Due tomorrow</div>
        </div>
        <h3>Prepare client presentation</h3>
        <p>Create slides for quarterly business review meeting</p>
        <div class="task-meta">
          <span class="task-project">üìä Client Relations</span>
          <span class="task-assignee">Assigned to: Madhava</span>
        </div>
        <div class="task-actions">
          <button class="action-btn start">Start Now</button>
          <button class="action-btn reschedule">Reschedule</button>
        </div>
      </div>

      <div class="task-card normal">
        <div class="task-header">
          <div class="priority-badge low">Low</div>
          <div class="task-due">Due in 3 days</div>
        </div>
        <h3>Code refactoring - utils module</h3>
        <p>Clean up and optimize utility functions for better performance</p>
        <div class="task-meta">
          <span class="task-project">üíª Development</span>
          <span class="task-assignee">Assigned to: Madhava</span>
        </div>
        <div class="task-actions">
          <button class="action-btn start">Start Now</button>
          <button class="action-btn reschedule">Reschedule</button>
        </div>
      </div>

      <div class="task-card normal">
        <div class="task-header">
          <div class="priority-badge medium">Medium</div>
          <div class="task-due">Due in 5 days</div>
        </div>
        <h3>Database backup optimization</h3>
        <p>Implement automated backup system with compression</p>
        <div class="task-meta">
          <span class="task-project">üóÑÔ∏è Infrastructure</span>
          <span class="task-assignee">Assigned to: Madhava</span>
        </div>
        <div class="task-actions">
          <button class="action-btn start">Start Now</button>
          <button class="action-btn reschedule">Reschedule</button>
        </div>
      </div>

      <div class="task-card normal">
        <div class="task-header">
          <div class="priority-badge low">Low</div>
          <div class="task-due">Due next week</div>
        </div>
        <h3>Team building activity planning</h3>
        <p>Organize quarterly team building event and activities</p>
        <div class="task-meta">
          <span class="task-project">üë• HR</span>
          <span class="task-assignee">Assigned to: Madhava</span>
        </div>
        <div class="task-actions">
          <button class="action-btn start">Start Now</button>
          <button class="action-btn reschedule">Reschedule</button>
        </div>
      </div>
    </div>

    <div class="bulk-actions">
      <h3>Bulk Actions</h3>
      <div class="bulk-buttons">
        <button class="bulk-btn">Mark All as Started</button>
        <button class="bulk-btn">Reschedule All</button>
        <button class="bulk-btn stuck-mode">Activate Stuck Mode‚Ñ¢</button>
      </div>
    </div>
  </main>

  <script>
    // Global state for dynamic functionality
    let pendingTasksState = {
      tasks: [
        {
          id: 1,
          title: "Update security protocols",
          description: "Review and implement new security measures for user authentication",
          priority: "high",
          project: "üîê Security Project",
          assignee: "Madhava",
          dueDate: "2024-01-20",
          status: "overdue",
          progress: 0
        },
        {
          id: 2,
          title: "Prepare client presentation",
          description: "Create slides for quarterly business review meeting",
          priority: "medium",
          project: "üìä Client Relations",
          assignee: "Madhava",
          dueDate: "2024-01-22",
          status: "due-soon",
          progress: 30
        },
        {
          id: 3,
          title: "Code refactoring - utils module",
          description: "Clean up and optimize utility functions for better performance",
          priority: "low",
          project: "üíª Development",
          assignee: "Madhava",
          dueDate: "2024-01-25",
          status: "normal",
          progress: 60
        },
        {
          id: 4,
          title: "Database backup optimization",
          description: "Implement automated backup system with compression",
          priority: "medium",
          project: "üóÑÔ∏è Infrastructure",
          assignee: "Madhava",
          dueDate: "2024-01-27",
          status: "normal",
          progress: 20
        },
        {
          id: 5,
          title: "Team building activity planning",
          description: "Organize quarterly team building event and activities",
          priority: "low",
          project: "üë• HR",
          assignee: "Madhava",
          dueDate: "2024-02-01",
          status: "normal",
          progress: 10
        }
      ],
      filters: {
        current: "all",
        sortBy: "dueDate"
      }
    };

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      renderTasks();
      setupEventListeners();
      
      // Update task statuses every minute
      setInterval(updateTaskStatuses, 60000);
    });

    // Render tasks based on current filter and sort
    function renderTasks() {
      const tasksContainer = document.querySelector('.tasks-container');
      if (!tasksContainer) return;

      let filteredTasks = [...pendingTasksState.tasks];

      // Apply filter
      if (pendingTasksState.filters.current !== "all") {
        filteredTasks = filteredTasks.filter(task => {
          switch (pendingTasksState.filters.current) {
            case "overdue":
              return task.status === "overdue";
            case "this-week":
              return isThisWeek(new Date(task.dueDate));
            case "next-week":
              return isNextWeek(new Date(task.dueDate));
            default:
              return true;
          }
        });
      }

      // Apply sort
      filteredTasks.sort((a, b) => {
        switch (pendingTasksState.filters.sortBy) {
          case "priority":
            const priorityOrder = { high: 3, medium: 2, low: 1 };
            return priorityOrder[b.priority] - priorityOrder[a.priority];
          case "project":
            return a.project.localeCompare(b.project);
          case "dueDate":
          default:
            return new Date(a.dueDate) - new Date(b.dueDate);
        }
      });

      tasksContainer.innerHTML = filteredTasks.map(task => `
        <div class="task-card ${task.status}" data-task-id="${task.id}">
          <div class="task-header">
            <div class="priority-badge ${task.priority}">${task.priority.charAt(0).toUpperCase() + task.priority.slice(1)}</div>
            <div class="task-due ${task.status}">${getDueText(task)}</div>
          </div>
          <h3>${task.title}</h3>
          <p>${task.description}</p>
          <div class="task-meta">
            <span class="task-project">${task.project}</span>
            <span class="task-assignee">Assigned to: ${task.assignee}</span>
          </div>
          <div class="task-progress">
            <div class="progress-bar">
              <div class="progress-fill" style="width: ${task.progress}%"></div>
            </div>
            <span class="progress-text">${task.progress}%</span>
          </div>
          <div class="task-actions">
            <button class="action-btn start" onclick="startTask(${task.id})">Start Now</button>
            <button class="action-btn reschedule" onclick="rescheduleTask(${task.id})">Reschedule</button>
            <button class="action-btn complete" onclick="completeTask(${task.id})">Complete</button>
          </div>
        </div>
      `).join('');
    }

    // Setup event listeners
    function setupEventListeners() {
      // Filter tabs
      const filterTabs = document.querySelectorAll('.filter-tab');
      filterTabs.forEach(tab => {
        tab.addEventListener('click', function() {
          filterTabs.forEach(t => t.classList.remove('active'));
          this.classList.add('active');
          pendingTasksState.filters.current = this.textContent.toLowerCase().replace(' ', '-');
          renderTasks();
        });
      });

      // Sort select
      const sortSelect = document.querySelector('.sort-select');
      if (sortSelect) {
        sortSelect.addEventListener('change', function() {
          pendingTasksState.filters.sortBy = this.value.toLowerCase().replace(' ', '');
          renderTasks();
        });
      }

      // Bulk action buttons
      const bulkButtons = document.querySelectorAll('.bulk-btn');
      bulkButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          const action = this.textContent.toLowerCase();
          performBulkAction(action);
        });
      });
    }

    // Task action functions
    function startTask(taskId) {
      const task = pendingTasksState.tasks.find(t => t.id === taskId);
      if (task) {
        task.progress = Math.min(100, task.progress + 25);
        showNotification(`Started working on "${task.title}"`, 'success');
        renderTasks();
      }
    }

    function rescheduleTask(taskId) {
      const task = pendingTasksState.tasks.find(t => t.id === taskId);
      if (task) {
        const newDate = prompt('Enter new due date (YYYY-MM-DD):', task.dueDate);
        if (newDate && isValidDate(newDate)) {
          task.dueDate = newDate;
          task.status = getTaskStatus(new Date(newDate));
          showNotification(`Rescheduled "${task.title}"`, 'info');
          renderTasks();
        }
      }
    }

    function completeTask(taskId) {
      const task = pendingTasksState.tasks.find(t => t.id === taskId);
      if (task) {
        task.progress = 100;
        showNotification(`Completed "${task.title}"! üéâ`, 'success');
        
        // Remove from pending tasks
        pendingTasksState.tasks = pendingTasksState.tasks.filter(t => t.id !== taskId);
        renderTasks();
      }
    }

    // Bulk action functions
    function performBulkAction(action) {
      const visibleTasks = pendingTasksState.tasks.filter(task => {
        if (pendingTasksState.filters.current === "all") return true;
        switch (pendingTasksState.filters.current) {
          case "overdue":
            return task.status === "overdue";
          case "this-week":
            return isThisWeek(new Date(task.dueDate));
          case "next-week":
            return isNextWeek(new Date(task.dueDate));
          default:
            return true;
        }
      });

      switch (action) {
        case "mark all as started":
          visibleTasks.forEach(task => {
            task.progress = Math.min(100, task.progress + 25);
          });
          showNotification(`Started ${visibleTasks.length} tasks`, 'success');
          break;
        case "reschedule all":
          const newDate = prompt('Enter new due date for all tasks (YYYY-MM-DD):');
          if (newDate && isValidDate(newDate)) {
            visibleTasks.forEach(task => {
              task.dueDate = newDate;
              task.status = getTaskStatus(new Date(newDate));
            });
            showNotification(`Rescheduled ${visibleTasks.length} tasks`, 'info');
          }
          break;
        case "activate stuck mode‚Ñ¢":
          showNotification('üß† Stuck Mode‚Ñ¢ activated for all tasks! Break them down into smaller steps.', 'warning');
          break;
      }
      renderTasks();
    }

    // Utility functions
    function getDueText(task) {
      const today = new Date();
      const dueDate = new Date(task.dueDate);
      const diffTime = dueDate - today;
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

      if (diffDays < 0) {
        return `Overdue by ${Math.abs(diffDays)} days`;
      } else if (diffDays === 0) {
        return "Due today";
      } else if (diffDays === 1) {
        return "Due tomorrow";
      } else {
        return `Due in ${diffDays} days`;
      }
    }

    function getTaskStatus(dueDate) {
      const today = new Date();
      const diffTime = dueDate - today;
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

      if (diffDays < 0) return "overdue";
      if (diffDays <= 1) return "due-soon";
      return "normal";
    }

    function isThisWeek(date) {
      const today = new Date();
      const startOfWeek = new Date(today.setDate(today.getDate() - today.getDay()));
      const endOfWeek = new Date(today.setDate(today.getDate() - today.getDay() + 6));
      return date >= startOfWeek && date <= endOfWeek;
    }

    function isNextWeek(date) {
      const today = new Date();
      const startOfNextWeek = new Date(today.setDate(today.getDate() - today.getDay() + 7));
      const endOfNextWeek = new Date(today.setDate(today.getDate() - today.getDay() + 13));
      return date >= startOfNextWeek && date <= endOfNextWeek;
    }

    function isValidDate(dateString) {
      const date = new Date(dateString);
      return date instanceof Date && !isNaN(date);
    }

    function updateTaskStatuses() {
      pendingTasksState.tasks.forEach(task => {
        task.status = getTaskStatus(new Date(task.dueDate));
      });
      renderTasks();
    }

    function showNotification(message, type = 'info') {
      // Create notification element
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        color: white;
        font-weight: 500;
        z-index: 1000;
        animation: slideIn 0.3s ease-out;
        ${type === 'success' ? 'background: #4CAF50;' : 
          type === 'warning' ? 'background: #FF9800;' : 
          type === 'error' ? 'background: #f44336;' : 
          'background: #2196F3;'}
      `;

      document.body.appendChild(notification);

      // Remove after 3 seconds
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-in';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, 3000);
    }

    // Logout function
    function logout() {
      const confirmLogout = confirm('Are you sure you want to logout?');
      if (confirmLogout) {
        // Clear any stored user data
        localStorage.removeItem('userRole');
        localStorage.removeItem('userSettings');
        
        // Show logout message
        alert('Logging out...');
        
        // Redirect to home page after a short delay
        setTimeout(() => {
          window.location.href = '../home.html';
        }, 1000);
      }
    }
  </script>

  <style>
    /* Notification animations */
    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes slideOut {
      from {
        transform: translateX(0);
        opacity: 1;
      }
      to {
        transform: translateX(100%);
        opacity: 0;
      }
    }

    /* Task progress styles */
    .task-progress {
      margin: 1rem 0;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: #f0f0f0;
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 0.5rem;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #4CAF50, #45a049);
      transition: width 0.3s ease;
    }

    .progress-text {
      font-size: 0.875rem;
      color: #666;
    }

    /* Task card hover effects */
    .task-card {
      transition: all 0.3s ease;
    }

    .task-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    /* Action button styles */
    .action-btn.complete {
      background: #4CAF50;
      color: white;
    }

    .action-btn.complete:hover {
      background: #45a049;
    }
  </style>
</body>
</html>
