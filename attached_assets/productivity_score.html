<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Productivity Score - Task Crown</title>
  <link rel="stylesheet" href="productivity_score.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <nav class="navbar">
    <div class="navbar-left">
      <div class="logo">
        <span class="logo-icon">üëë</span>
        <span class="logo-text">Task Crown</span>
      </div>
    </div>
    <div class="navbar-center">
      <a href="personal.html" class="nav-link">Dashboard</a>
      <a href="pending_tasks.html" class="nav-link">Pending Tasks</a>
      <a href="high_priority.html" class="nav-link">High Priority</a>
      <a href="completed_this_week.html" class="nav-link">Completed</a>
      <a href="productivity_score.html" class="nav-link active">Productivity</a>
    </div>
    <div class="navbar-right">
      <button class="profile-btn">
        <span class="profile-avatar">üë§</span>
      </button>
      <button class="logout-btn" onclick="logout()">
        <span class="logout-icon">üö™</span>
        <span class="logout-text">Logout</span>
      </button>
    </div>
  </nav>

  <main class="main-content">
    <div class="page-header">
      <div class="header-icon">üìä</div>
      <div class="header-content">
        <h1>Productivity Score</h1>
        <p>Track your productivity trends and optimize your workflow.</p>
      </div>
    </div>

    <div class="score-hero">
      <div class="score-circle">
        <div class="score-inner">
          <div class="score-value">87</div>
          <div class="score-label">Score</div>
        </div>
        <svg class="score-ring" width="200" height="200">
          <circle cx="100" cy="100" r="85" stroke="rgba(255,255,255,0.1)" stroke-width="8" fill="none"/>
          <circle cx="100" cy="100" r="85" stroke="url(#gradient)" stroke-width="8" fill="none" 
                  stroke-dasharray="534" stroke-dashoffset="69" stroke-linecap="round" 
                  style="transform: rotate(-90deg); transform-origin: center;"/>
          <defs>
            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color:#00d2ff"/>
              <stop offset="100%" style="stop-color:#3a7bd5"/>
            </linearGradient>
          </defs>
        </svg>
      </div>
      <div class="score-insights">
        <div class="insight-item">
          <span class="insight-icon">üìà</span>
          <div class="insight-content">
            <div class="insight-title">Trending Up</div>
            <div class="insight-desc">+12 points this week</div>
          </div>
        </div>
        <div class="insight-item">
          <span class="insight-icon">üéØ</span>
          <div class="insight-content">
            <div class="insight-title">Above Average</div>
            <div class="insight-desc">23% better than last month</div>
          </div>
        </div>
        <div class="insight-item">
          <span class="insight-icon">‚ö°</span>
          <div class="insight-content">
            <div class="insight-title">Peak Performance</div>
            <div class="insight-desc">Best score: 94 (2 days ago)</div>
          </div>
        </div>
      </div>
    </div>

    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-header">
          <span class="metric-icon">‚úÖ</span>
          <span class="metric-title">Task Completion</span>
        </div>
        <div class="metric-value">92%</div>
        <div class="metric-bar">
          <div class="metric-fill" style="width: 92%"></div>
        </div>
        <div class="metric-change positive">+5% from last week</div>
      </div>

      <div class="metric-card">
        <div class="metric-header">
          <span class="metric-icon">‚è∞</span>
          <span class="metric-title">Time Efficiency</span>
        </div>
        <div class="metric-value">78%</div>
        <div class="metric-bar">
          <div class="metric-fill" style="width: 78%"></div>
        </div>
        <div class="metric-change negative">-2% from last week</div>
      </div>

      <div class="metric-card">
        <div class="metric-header">
          <span class="metric-icon">üéØ</span>
          <span class="metric-title">Focus Score</span>
        </div>
        <div class="metric-value">85%</div>
        <div class="metric-bar">
          <div class="metric-fill" style="width: 85%"></div>
        </div>
        <div class="metric-change positive">+8% from last week</div>
      </div>

      <div class="metric-card">
        <div class="metric-header">
          <span class="metric-icon">üî•</span>
          <span class="metric-title">Consistency</span>
        </div>
        <div class="metric-value">90%</div>
        <div class="metric-bar">
          <div class="metric-fill" style="width: 90%"></div>
        </div>
        <div class="metric-change positive">+3% from last week</div>
      </div>
    </div>

    <div class="chart-section">
      <h2>üìà Weekly Trends</h2>
      <div class="chart-container">
        <div class="chart-header">
          <span>Productivity Score Over Time</span>
          <div class="chart-legend">
            <span class="legend-item">
              <span class="legend-color" style="background: #00d2ff"></span>
              This Week
            </span>
            <span class="legend-item">
              <span class="legend-color" style="background: rgba(255,255,255,0.3)"></span>
              Last Week
            </span>
          </div>
        </div>
        <div class="chart">
          <div class="chart-bars">
            <div class="bar-group">
              <div class="bar current" style="height: 70%"></div>
              <div class="bar previous" style="height: 65%"></div>
              <span class="bar-label">Mon</span>
            </div>
            <div class="bar-group">
              <div class="bar current" style="height: 80%"></div>
              <div class="bar previous" style="height: 75%"></div>
              <span class="bar-label">Tue</span>
            </div>
            <div class="bar-group">
              <div class="bar current" style="height: 90%"></div>
              <div class="bar previous" style="height: 82%"></div>
              <span class="bar-label">Wed</span>
            </div>
            <div class="bar-group">
              <div class="bar current" style="height: 85%"></div>
              <div class="bar previous" style="height: 78%"></div>
              <span class="bar-label">Thu</span>
            </div>
            <div class="bar-group">
              <div class="bar current" style="height: 95%"></div>
              <div class="bar previous" style="height: 88%"></div>
              <span class="bar-label">Fri</span>
            </div>
            <div class="bar-group">
              <div class="bar current" style="height: 75%"></div>
              <div class="bar previous" style="height: 70%"></div>
              <span class="bar-label">Sat</span>
            </div>
            <div class="bar-group">
              <div class="bar current" style="height: 60%"></div>
              <div class="bar previous" style="height: 55%"></div>
              <span class="bar-label">Sun</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="recommendations-section">
      <h2>üí° Productivity Recommendations</h2>
      <div class="recommendations-grid">
        <div class="recommendation-card">
          <div class="rec-icon">üßò</div>
          <h4>Take More Breaks</h4>
          <p>Your focus score could improve with 15-minute breaks every 2 hours.</p>
          <button class="rec-btn">Try Pomodoro Timer</button>
        </div>
        <div class="recommendation-card">
          <div class="rec-icon">üìÖ</div>
          <h4>Time Blocking</h4>
          <p>Schedule focused work sessions to improve time efficiency.</p>
          <button class="rec-btn">Set Focus Time</button>
        </div>
        <div class="recommendation-card">
          <div class="rec-icon">üéØ</div>
          <h4>Priority Matrix</h4>
          <p>Use Eisenhower matrix to prioritize high-impact tasks.</p>
          <button class="rec-btn">Learn More</button>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Global state for dynamic functionality
    let productivityState = {
      currentScore: 87,
      weeklyData: [70, 80, 90, 85, 95, 75, 60],
      monthlyData: [65, 70, 75, 80, 85, 90, 87],
      metrics: {
        taskCompletion: 92,
        timeEfficiency: 78,
        focusScore: 85,
        consistency: 90
      }
    };

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      updateScore();
      setupChartInteractions();
      
      // Update score every minute
      setInterval(updateScore, 60000);
      
      // Update metrics every 30 seconds
      setInterval(updateMetrics, 30000);
    });

    function updateScore() {
      // Simulate real-time score fluctuations
      const change = (Math.random() - 0.5) * 2; // -1 to +1
      productivityState.currentScore = Math.max(60, Math.min(100, productivityState.currentScore + change));
      
      // Update score display
      const scoreElement = document.querySelector('.score-value');
      if (scoreElement) {
        scoreElement.textContent = Math.round(productivityState.currentScore);
      }
      
      // Update score ring
      updateScoreRing();
      
      // Update insights
      updateInsights();
    }

    function updateScoreRing() {
      const scoreRing = document.querySelector('.score-ring circle:last-child');
      if (scoreRing) {
        const circumference = 2 * Math.PI * 85; // radius = 85
        const progress = productivityState.currentScore / 100;
        const dashoffset = circumference * (1 - progress);
        scoreRing.style.strokeDashoffset = dashoffset;
      }
    }

    function updateInsights() {
      const insights = document.querySelectorAll('.insight-desc');
      if (insights.length >= 3) {
        const change = productivityState.currentScore - 87; // baseline
        insights[0].textContent = `${change > 0 ? '+' : ''}${Math.round(change)} points this week`;
        insights[1].textContent = `${Math.round((productivityState.currentScore / 87) * 100 - 100)}% better than last month`;
        insights[2].textContent = `Best score: ${Math.max(productivityState.currentScore, 94)} (${change > 0 ? 'today' : '2 days ago'})`;
      }
    }

    function updateMetrics() {
      // Simulate metric updates
      productivityState.metrics.taskCompletion += (Math.random() - 0.5) * 1;
      productivityState.metrics.timeEfficiency += (Math.random() - 0.5) * 1;
      productivityState.metrics.focusScore += (Math.random() - 0.5) * 1;
      productivityState.metrics.consistency += (Math.random() - 0.5) * 1;
      
      // Keep values in reasonable ranges
      Object.keys(productivityState.metrics).forEach(key => {
        productivityState.metrics[key] = Math.max(70, Math.min(100, productivityState.metrics[key]));
      });
      
      // Update metric displays
      updateMetricDisplays();
    }

    function updateMetricDisplays() {
      const metricValues = document.querySelectorAll('.metric-value');
      const metricFills = document.querySelectorAll('.metric-fill');
      const metricChanges = document.querySelectorAll('.metric-change');
      
      const metrics = [
        productivityState.metrics.taskCompletion,
        productivityState.metrics.timeEfficiency,
        productivityState.metrics.focusScore,
        productivityState.metrics.consistency
      ];
      
      metrics.forEach((value, index) => {
        if (metricValues[index]) {
          metricValues[index].textContent = Math.round(value) + '%';
        }
        if (metricFills[index]) {
          metricFills[index].style.width = value + '%';
        }
      });
    }

    function setupChartInteractions() {
      // Add click handlers for chart bars
      document.querySelectorAll('.bar-group').forEach((barGroup, index) => {
        barGroup.addEventListener('click', function() {
          showDayDetails(index);
        });
      });

      // Add click handlers for recommendation buttons
      document.querySelectorAll('.rec-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const action = this.textContent;
          handleRecommendationAction(action);
        });
      });
    }

    function showDayDetails(dayIndex) {
      const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
      const currentScore = productivityState.weeklyData[dayIndex];
      const previousScore = productivityState.monthlyData[dayIndex];
      
      showNotification(`üìä ${days[dayIndex]}: Current ${currentScore}% vs Previous ${previousScore}%`);
    }

    function handleRecommendationAction(action) {
      switch (action) {
        case 'Try Pomodoro Timer':
          showNotification('üßò Pomodoro Timer activated! 25 minutes of focused work.');
          productivityState.metrics.focusScore += 5;
          break;
        case 'Set Focus Time':
          const hours = prompt('How many hours of focus time?', '2');
          if (hours) {
            showNotification(`üìÖ Focus time scheduled for ${hours} hours`);
            productivityState.metrics.timeEfficiency += 3;
          }
          break;
        case 'Learn More':
          showNotification('üéØ Priority Matrix guide opened. Use Eisenhower method for better task prioritization.');
          break;
      }
      
      updateMetricDisplays();
    }

    function showNotification(message) {
      const notification = document.createElement('div');
      notification.textContent = message;
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: #4CAF50;
        color: white;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        z-index: 1000;
        animation: slideIn 0.3s ease-out;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      `;
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-in';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, 3000);
    }

    // Logout function
    function logout() {
      const confirmLogout = confirm('Are you sure you want to logout?');
      if (confirmLogout) {
        // Clear any stored user data
        localStorage.removeItem('userRole');
        localStorage.removeItem('userSettings');
        
        // Show logout message
        alert('Logging out...');
        
        // Redirect to home page after a short delay
        setTimeout(() => {
          window.location.href = '../home.html';
        }, 1000);
      }
    }
  </script>

  <style>
    /* Animation keyframes */
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes slideOut {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }

    /* Score circle enhancements */
    .score-circle {
      transition: all 0.3s ease;
    }

    .score-circle:hover {
      transform: scale(1.05);
    }

    .score-ring circle:last-child {
      transition: stroke-dashoffset 0.5s ease;
    }

    /* Chart enhancements */
    .bar-group {
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .bar-group:hover {
      transform: scaleY(1.1);
    }

    .bar.current {
      transition: height 0.3s ease;
    }

    /* Metric card enhancements */
    .metric-card {
      transition: all 0.3s ease;
    }

    .metric-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .metric-fill {
      transition: width 0.5s ease;
    }

    /* Recommendation card enhancements */
    .recommendation-card {
      transition: all 0.3s ease;
    }

    .recommendation-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.2);
    }

    .rec-btn {
      transition: all 0.3s ease;
    }

    .rec-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* Pulse animation for score */
    .score-value {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
  </style>
</body>
</html>